{% extends 'clientside/main.html' %}

{% block HeadContent %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
{% endblock %}

{% block PageContent %}
<main dir="rtl" class="bg-light py-5">
    <div class="container">
        <div class="card shadow rounded-4 p-4 mx-auto" style="max-width: 600px;">
            <h2 class="mb-4 text-center text-primary">حجز موعد</h2>
            <form id="meeting-form" onsubmit="sendMeetingRequest(event)">
                <div class="mb-3">
                    <label for="name" class="form-label">الاسم:</label>
                    <input type="text" id="name" name="name" class="form-control" placeholder="مثال: أحمد أسامة" required>
                </div>

                <div class="mb-3">
                    <label for="date" class="form-label">تاريخ الموعد:</label>
                    <input type="date" id="date" name="date" class="form-control" required>
                </div>

                <div class="row mb-3">
                    <div class="col">
                        <label for="start-time" class="form-label">وقت البدء:</label>
                        <input type="time" id="start-time" name="start_time" class="form-control" required>
                    </div>
                    <div class="col">
                        <label for="end-time" class="form-label">وقت الانتهاء:</label>
                        <input type="time" id="end-time" name="end_time" class="form-control" required>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="location" class="form-label">اسم المكان:</label>
                    <input type="text" id="location" name="location" class="form-control" placeholder="مثال: مقر الشركة" required>
                </div>

                <div class="mb-3">
                    <label for="location-url" class="form-label">رابط الموقع (اختياري):</label>
                    <input type="url" id="location-url" name="location_url" class="form-control" placeholder="مثال: https://maps.google.com/..." >
                </div>

                <div class="mb-3">
                    <label for="subject" class="form-label">ملاحظات :</label>
                    <textarea id="subject" name="subject" class="form-control" placeholder="مثال: مناقشة متطلبات المشروع" rows="3" required></textarea>
                </div>

                <div class="mb-4">
                    <label for="phone" class="form-label">رقم الهاتف: (للتواصل من خلاله)</label>
                    <input type="text" id="phone" name="phone" class="form-control" placeholder="مثال: 01234567890" required>
                </div>

                <div class="mt-5 mb-5 fw-bold">
                    <ul class="list-group">
                        <li class="list-group-item list-group-item-primary"> يتم التواصل مع حضراتكم لاتاكيد ميعاد المقابلة </li>
                        <li class="list-group-item list-group-item-primary"> يتم التاكيد مره اخري علي ميعاد المعاينة في صباح يوم المعاينة </li>
                        <li class="list-group-item list-group-item-primary"> تكلفة المعيانة 200 جنية مصري شاملة:  
                            <ul>
                                <li> معاينة المشروع بالكامل </li>
                                <li> مقايسة ترسل الي حضراتكم خلال 1~2 يوم من يوم المعيانة </li>
                            </ul>
                        </li>
                        <li class="list-group-item list-group-item-primary"> في حالة اتمام الاتفاق علي المشروع يتم خصم تكلفة المعاينة لتصبح 0 جنية مصري </li>
                        <li class="list-group-item list-group-item-primary"> المقايسة المرسلة الي حضراتكم تحتوي علي عدد من الاسعار المتاحة وليس سعر واحد فقط  </li>
                        <li class="list-group-item list-group-item-primary"> المقايسة المرسلة الي حضراتكم تشمل تكلفة المشروع كاملا و تعامل بمثابقة عقد للاستلام ة تحتوي علي كامل المواصفات للمشروع المطلوب</li>
                    </ul>
                </div>

                <button type="submit" class="btn btn-success w-100">إرسال عبر واتساب</button>
            </form>
            
        </div>
    </div>
</main>
{% endblock %}

{% block ScriptsContent %}
<script>
    function sendMeetingRequest(event) {
        event.preventDefault();

        const name = document.getElementById('name').value.trim();
        const date = document.getElementById('date').value;
        const startTime = document.getElementById('start-time').value;
        const endTime = document.getElementById('end-time').value;
        const location = document.getElementById('location').value.trim();
        const locationURL = document.getElementById('location-url').value.trim();
        const subject = document.getElementById('subject').value.trim();
        const phone = document.getElementById('phone').value.trim();

        let message = `مرحبًا، أرغب في حجز موعد:\n\nالاسم: ${name}\nالتاريخ: ${date}\nالوقت: من ${startTime} إلى ${endTime}\nالمكان: ${location}\n ${phone}رقم الهاتف:`;
        
        if (locationURL) {
            message += `\nرابط الموقع: ${locationURL}`;
        }

        message += `\nموضوع الموعد: ${subject}`;
        const encodedMessage = encodeURIComponent(message);

        if (phone && message) {
            const whatsappURL = `https://wa.me/+201118954564?text=${encodedMessage}`;
            window.open(whatsappURL, '_blank');
        }
    }
</script>
{% endblock %}
